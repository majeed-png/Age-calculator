<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± â€“ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ | Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø«ÙˆÙŠÙ†ÙŠ</title>
<link rel="icon" type="image/png" href="favicon.png">
<style>
:root{
  --bg:#0f1115; --card:#151a22; --text:#e9eef6; --muted:#a8b3c7;
  --accent:#6366f1; --accent-2:#8b5cf6; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.25);
  --font:"Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic", "Noto Sans Arabic", Arial;
}
:root[data-theme='light']{ --bg:#e7ecf3; --card:#f1f4f9; --text:#0b0f14; --muted:#4b5565; }
:root[data-theme='amoled']{ --bg:#000; --card:#0a0a0a; --text:#e9eef6; --muted:#a8b3c7; }
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:
   radial-gradient(1200px 600px at 100% -10%, rgba(124,92,255,.10), transparent 60%),
   radial-gradient(1200px 600px at -30% 110%, rgba(46,211,198,.08), transparent 60%),
   var(--bg); color:var(--text); font-family:var(--font); line-height:1.7;}
:root[data-theme='light'] body,:root[data-theme='light']{background:
   radial-gradient(1200px 600px at 100% -10%, rgba(124,92,255,.06), transparent 60%),
   radial-gradient(1200px 600px at -30% 110%, rgba(46,211,198,.06), transparent 60%),
   var(--bg);}
.container{max-width:1000px;margin:24px auto;padding:16px}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);margin-top:16px}
:root[data-theme='light'] .card{border:1px solid rgba(10,10,10,.08)}
h1{margin:0 0 8px 0;font-weight:800;letter-spacing:.2px} h2{margin:22px 0 10px 0;font-weight:800} h3{margin:14px 0 10px 0;font-weight:800}
a{color:var(--accent)}
button{cursor:pointer;border:none;border-radius:12px;padding:12px 14px;height:48px;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:white;font-weight:800}
button:disabled{opacity:.6;cursor:not-allowed}
.ghost-btn{background:#0c0f14;color:var(--text);border:1px solid rgba(255,255,255,.15)}
:root[data-theme='light'] .ghost-btn{background:#eef3fa;color:#0b0f14;border:1px solid rgba(0,0,0,.12)}
.muted{color:var(--muted)}
.notice{background:rgba(255,255,255,.06);border:1px dashed rgba(255,255,255,.12);border-radius:12px;padding:14px;margin-top:10px}
:root[data-theme='light'] .notice{background:#eef3fa;border:1px dashed rgba(0,0,0,.12)}
.navbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}
.navbar .row{display:flex;gap:10px;flex-wrap:nowrap}
.badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);font-weight:700}
.kpis{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
@media(max-width:900px){.kpis{grid-template-columns:repeat(2,1fr)}}
.kpi{background:#0c0f14;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:14px}
:root[data-theme='light'] .kpi{background:#e9edf4;border:1px solid rgba(0,0,0,.08)}
.kpi .num{font-size:1.6rem;font-weight:900}
.tag{padding:6px 10px;border-radius:12px;background:rgba(255,255,255,.08);font-weight:800}
:root[data-theme='light'] .tag{background:#e9edf4}
footer{opacity:.85;padding:20px 6px;text-align:center}
.bento{display:grid;grid-template-columns:1.2fr 1fr;gap:16px}
@media(max-width:1100px){.bento{grid-template-columns:1fr}}
.row{display:flex;gap:10px;flex-wrap:wrap}
.share-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.copy-toast{position:fixed;bottom:22px;right:22px;background:var(--card);border:1px solid rgba(255,255,255,.14);padding:10px 14px;border-radius:12px;display:none}
.countdown{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;margin-top:10px}
.count-box{min-width:110px;text-align:center;background:#0c0f14;border:1px solid rgba(255,255,255,.08);padding:10px 12px;border-radius:12px}
:root[data-theme='light'] .count-box{background:#e9edf4;border:1px solid rgba(0,0,0,.08)}
.count-num{font-weight:900;font-size:1.5rem}
.facts-title{font-weight:900;}
.hint-banner{margin-top:6px;padding:8px 10px;border-radius:10px;background:rgba(255,255,255,.06);border:1px dashed rgba(255,255,255,.16);font-weight:700;color:var(--muted)}
:root[data-theme='light'] .hint-banner{background:#eef3fa;border-color:rgba(0,0,0,.18);color:#4b5565}
.birthday .card, .birthday body{ 
  background: radial-gradient(1000px 600px at 0% 0%, rgba(255,215,0,.12), transparent 60%), 
              radial-gradient(1000px 600px at 100% 100%, rgba(255,105,180,.12), transparent 60%), var(--bg);
}
.birthday-banner{ display:none; background:linear-gradient(135deg, #ffd700, #ff69b4); color:#ffffff; border:0; text-align:center; padding:18px; border-radius:16px; font-weight:900; font-size:1.4rem; box-shadow:0 10px 40px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,.5); }
.birthday .birthday-banner{ display:block; }
:root[data-theme='light'] .birthday-banner{ color:#0b0f14 !important; }
/* NEW: Only-English text LTR, layout remains RTL */
.ltr{direction:ltr; text-align:left; unicode-bidi:plaintext;}
</style>
</head>
<body dir="rtl" lang="ar">
<div class="container">
  <div class="navbar">
    <div class="badge" data-i18n="details_badge">ğŸ¯ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ</div>
    <div class="row">
      <button id="openCustomize" style="max-width:140px" data-i18n="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      <a href="index.html" title="Ø±Ø¬ÙˆØ¹"><button class="ghost-btn" style="min-width:56px">â¬…ï¸</button></a>
    </div>
  </div>

  <div id="settings" class="card" style="display:none">
    <h2 data-i18n="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
    <div class="row">
      <div class="tag" id="th-light" data-theme="light">ÙØ§ØªØ­</div>
      <div class="tag" id="th-dark" data-theme="dark">Ø¯Ø§ÙƒÙ†</div>
      <div class="tag" id="th-amoled" data-theme="amoled">Ø£Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ (AMOLED)</div>
    </div>
    <h3 data-i18n="btn_color">Ù„ÙˆÙ† Ø§Ù„Ø²Ø±</h3>
    <div class="row" id="colorRow">
      <div class="tag" data-accent="#6366f1,#8b5cf6" style="background:#6366f1">â—</div>
      <div class="tag" data-accent="#06b6d4,#22d3ee" style="background:#06b6d4">â—</div>
      <div class="tag" data-accent="#10b981,#34d399" style="background:#10b981">â—</div>
      <div class="tag" data-accent="#f59e0b,#f97316" style="background:#f59e0b">â—</div>
      <div class="tag" data-accent="#ef4444,#f43f5e" style="background:#ef4444">â—</div>
    </div>
    <h3 data-i18n="language">Ø§Ù„Ù„ØºØ©</h3>
    <div class="row">
      <div class="tag" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
      <div class="tag" data-lang="en">English</div>
    </div>
    <h3 data-i18n="timezone">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</h3>
    <div class="row">
      <select id="tzSelect" style="min-width:280px;height:44px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:#0c0f14;color:var(--text)"></select>
    </div>
  </div>

  <div class="card birthday-banner" data-i18n="birthday_today">Ø§Ù„ÙŠÙˆÙ… Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ! ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†Øª Ø¨Ø®ÙŠØ± ğŸ‰</div>

  <div id="contentArea" class="bento" style="display:none">
    <div class="card">
      <h2 data-i18n="metrics_title">Ø¹Ù…Ø±Ùƒ Ø¨ØµÙŠØº ÙˆØ£Ø´ÙƒØ§Ù„ Ù…Ø®ØªÙ„ÙØ©</h2>
      <div class="kpis">
        <div class="kpi"><div class="muted" data-i18n="years">Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª</div><div class="num" id="yearsAge">â€”</div></div>
        <div class="kpi"><div class="muted" data-i18n="months">Ø¨Ø§Ù„Ø£Ø´Ù‡Ø±</div><div class="num" id="monthsAge">â€”</div></div>
        <div class="kpi"><div class="muted" data-i18n="weeks">Ø¨Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹</div><div class="num" id="weeksAge">â€”</div></div>
        <div class="kpi"><div class="muted" data-i18n="days">Ø¨Ø§Ù„Ø£ÙŠØ§Ù…</div><div class="num" id="daysAge">â€”</div></div>
        <div class="kpi"><div class="muted" data-i18n="hours">Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª</div><div class="num" id="hoursAge">â€”</div></div>
      </div>

      <div class="notice" style="margin-top:12px">
        <b data-i18n="countdown_title">Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…</b>
        <div id="countdown" class="countdown" style="margin-top:8px">
          <div class="count-box"><div class="count-num" id="cdDays">â€”</div><div class="muted" data-i18n="cd_days">Ø£ÙŠØ§Ù…</div></div>
          <div class="count-box"><div class="count-num" id="cdHours">â€”</div><div class="muted" data-i18n="cd_hours">Ø³Ø§Ø¹Ø§Øª</div></div>
          <div class="count-box"><div class="count-num" id="cdMin">â€”</div><div class="muted" data-i18n="cd_minutes">Ø¯Ù‚Ø§Ø¦Ù‚</div></div>
          <div class="count-box"><div class="count-num" id="cdSec">â€”</div><div class="muted" data-i18n="cd_seconds">Ø«ÙˆØ§Ù†ÙŠ</div></div>
        </div>
      </div>

      <div class="share-row">
        <button id="shareBtn" data-i18n="share_image">Ù…Ø´Ø§Ø±ÙƒØ© ÙƒØµÙˆØ±Ø© (Ø·ÙˆÙ„ÙŠ)</button>
        <button id="shareSquareBtn" data-i18n="share_square">Ù…Ø´Ø§Ø±ÙƒØ© Ø¥Ù†Ø³ØªØ§ (Ù…Ø±Ø¨Ù‘Ø¹)</button>
        <button id="copyLinkBtn" class="ghost-btn" data-i18n="copy_link">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
      </div>
      <div class="copy-toast"></div>

      <hr/>
      <h3 data-i18n="more_info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± Ø¹Ù† Ø¹Ù…Ø±Ùƒ</h3>
      <div class="row">
        <span class="tag"><span data-i18n="born_day">ÙˆÙ„Ø¯Øª ÙŠÙˆÙ…: </span><b id="weekday">â€”</b></span>
        <span class="tag"><span data-i18n="born_season">ÙˆÙ„Ø¯Øª ÙÙŠ ÙØµÙ„: </span><b id="season">â€”</b></span>
        <span class="tag"><span data-i18n="life_stage">Ù…Ø±Ø­Ù„Ø© Ø­ÙŠØ§ØªÙƒ: </span><b id="lifeStage">â€”</b></span>
        <span class="tag" id="sleepTag">â€”</span>
      </div>
      <div id="sleepBanner" class="hint-banner" style="display:none"></div>

      <hr/>
      <h3 data-i18n="greg_age">Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ</h3>
      <div id="gregInfo" class="muted">â€”</div>
      <hr/>
      <h3 data-i18n="hijri_age">Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)</h3>
      <div id="hijriInfo" class="muted">â€”</div>
    </div>

    <div class="card">
      <h2 class="facts-title" data-i18n="facts">Ø­Ù‚Ø§Ø¦Ù‚ Ø­ØµÙ„Øª ÙÙŠ Ø­ÙŠØ§ØªÙƒ</h2>
      <div id="breathsLine" class="fact-line">â€”</div>
      <div id="heartbeatsLine" class="fact-line">â€”</div>
      <div id="laughsLine" class="fact-line">â€”</div>
      <div id="sleptLine" class="fact-line">â€”</div>
      <div id="eatenLine" class="fact-line">â€”</div>
      <div class="notice" data-i18n="clarify">
        Ù…Ø¹Ø¯Ù„Ø§Øª ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø«Ø§Ø¨ØªØ©: Ù¢Ù  Ø£Ù„Ù Ù†ÙÙÙØ³/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ù†Ø¨Ø¶Ø©/Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ù¡Ù  Ø¶Ø­ÙƒØ§Øª/ÙŠÙˆÙ…ØŒ Ù¨ Ø³Ø§Ø¹Ø§Øª Ù†ÙˆÙ…/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ø¯Ù‚ÙŠÙ‚Ø© Ø·Ø¹Ø§Ù…/ÙŠÙˆÙ….
      </div>
    </div>
  </div>

  <div class="card notice" id="noData" style="display:none">
    <span>No birthdate yet</span> Â· <a href="index.html">Go to input page</a>
  </div>

  <footer class="container">
    Made By Abdulmajeed Althuwaini Â· v1.0 Â· Made With Love ğŸ’š Â· Â© 2025
  </footer>
</div>

<script>
const TEXTS = {
  ar:{details_badge:"ğŸ¯ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ",settings:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",metrics_title:"Ø¹Ù…Ø±Ùƒ Ø¨ØµÙŠØº ÙˆØ£Ø´ÙƒØ§Ù„ Ù…Ø®ØªÙ„ÙØ©",years:"Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª",months:"Ø¨Ø§Ù„Ø£Ø´Ù‡Ø±",weeks:"Ø¨Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹",days:"Ø¨Ø§Ù„Ø£ÙŠØ§Ù…",hours:"Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª",share_image:"Ù…Ø´Ø§Ø±ÙƒØ© ÙƒØµÙˆØ±Ø© (Ø·ÙˆÙ„ÙŠ)",share_square:"Ù…Ø´Ø§Ø±ÙƒØ© Ø¥Ù†Ø³ØªØ§ (Ù…Ø±Ø¨Ù‘Ø¹)",copy_link:"Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·",more_info:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± Ø¹Ù† Ø¹Ù…Ø±Ùƒ",born_day:"ÙˆÙ„Ø¯Øª ÙŠÙˆÙ…: ",born_season:"ÙˆÙ„Ø¯Øª ÙÙŠ ÙØµÙ„: ",life_stage:"Ù…Ø±Ø­Ù„Ø© Ø­ÙŠØ§ØªÙƒ: ",greg_age:"Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ",hijri_age:"Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)",facts:"Ø­Ù‚Ø§Ø¦Ù‚ Ø­ØµÙ„Øª ÙÙŠ Ø­ÙŠØ§ØªÙƒ",clarify:"Ù…Ø¹Ø¯Ù„Ø§Øª ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø«Ø§Ø¨ØªØ©: Ù¢Ù  Ø£Ù„Ù Ù†ÙÙÙØ³/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ù†Ø¨Ø¶Ø©/Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ù¡Ù  Ø¶Ø­ÙƒØ§Øª/ÙŠÙˆÙ…ØŒ Ù¨ Ø³Ø§Ø¹Ø§Øª Ù†ÙˆÙ…/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ø¯Ù‚ÙŠÙ‚Ø© Ø·Ø¹Ø§Ù…/ÙŠÙˆÙ….",timezone:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©",cd_days:"Ø£ÙŠØ§Ù…",cd_hours:"Ø³Ø§Ø¹Ø§Øª",cd_minutes:"Ø¯Ù‚Ø§Ø¦Ù‚",cd_seconds:"Ø«ÙˆØ§Ù†ÙŠ",countdown_title:"Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…",birthday_today:"Ø§Ù„ÙŠÙˆÙ… Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ! ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†Øª Ø¨Ø®ÙŠØ± ğŸ‰"},
  en:{details_badge:"ğŸ¯ Your Age Details",settings:"Settings",metrics_title:"Your Age in Many Ways",years:"Years",months:"Months",weeks:"Weeks",days:"Days",hours:"Hours",share_image:"Share as Image (Portrait)",share_square:"Share as Image (Square)",copy_link:"Copy link",more_info:"More about your age",born_day:"Born on: ",born_season:"Season: ",life_stage:"Life stage: ",greg_age:"Age (Gregorian)",hijri_age:"Age (Hijri â€“ Umm al-Qura)",facts:"Facts from your life",clarify:"Approximate averages: 20k breaths/day, 80 bpm, 10 laughs/day, 8 h sleep/day, 80 min eating/day.",timezone:"Time Zone",cd_days:"Days",cd_hours:"Hours",cd_minutes:"Minutes",cd_seconds:"Seconds",countdown_title:"Countdown to your next birthday",birthday_today:"It's your birthday today! Happy Birthday ğŸ‰"}
};
function getLang(){return localStorage.getItem('ageLang')||'ar'}
function setLang(l){localStorage.setItem('ageLang',l); location.reload();}
function applyI18n(){
  const L=getLang();
  document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); if(TEXTS[L]&&TEXTS[L][k]) el.textContent=TEXTS[L][k]; if(L==='en') el.classList.add('ltr'); else el.classList.remove('ltr'); });
  document.body.setAttribute('lang', L);
  // Layout stays RTL always
  document.body.setAttribute('dir','rtl');
}
// Theme / Accent
function setTheme(t){ localStorage.setItem('ageTheme',t); document.documentElement.dataset.theme=(t==='dark'?'':t); if(t==='dark') delete document.documentElement.dataset.theme; }
function setAccent(p){ const a=p.split(','); localStorage.setItem('ageAccent',p); document.documentElement.style.setProperty('--accent',a[0]); document.documentElement.style.setProperty('--accent-2',a[1]||a[0]); }
function setupSettings(){
  const t=localStorage.getItem('ageTheme')||'dark'; setTheme(t);
  ['th-light','th-dark','th-amoled'].forEach(id=>{ const el=document.getElementById(id); if(!el) return; const val=el.dataset.theme; el.classList.toggle('selected', t===(val==='dark'?'dark':val)); el.onclick=()=>{ setTheme(val); document.querySelectorAll('.tag[data-theme]').forEach(x=>x.classList.remove('selected')); el.classList.add('selected'); }; });
  const acc=localStorage.getItem('ageAccent')||'#6366f1,#8b5cf6'; setAccent(acc);
  document.querySelectorAll('#colorRow .tag').forEach(dot=>{ dot.onclick=()=>setAccent(dot.dataset.accent); });
  const L=getLang(); document.querySelectorAll('.row .tag[data-lang]').forEach(ch=>{ ch.classList.toggle('selected', ch.dataset.lang===L); ch.onclick=()=> setLang(ch.dataset.lang); });

  const zones=['Asia/Riyadh','Asia/Kuwait','Asia/Dubai','Asia/Qatar','Asia/Bahrain','Asia/Muscat','Africa/Cairo','Europe/Istanbul','Europe/London','Europe/Paris','America/Los_Angeles','America/New_York','Asia/Karachi','Asia/Dhaka','Asia/Tokyo'];
  const AR={'Asia/Riyadh':'Ø§Ù„Ø±ÙŠØ§Ø¶ (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)','Asia/Kuwait':'Ø§Ù„ÙƒÙˆÙŠØª','Asia/Dubai':'Ø¯Ø¨ÙŠ (Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª)','Asia/Qatar':'Ø§Ù„Ø¯ÙˆØ­Ø© (Ù‚Ø·Ø±)','Asia/Bahrain':'Ø§Ù„Ù…Ù†Ø§Ù…Ø© (Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†)','Asia/Muscat':'Ù…Ø³Ù‚Ø· (Ø¹ÙÙ…Ø§Ù†)','Africa/Cairo':'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© (Ù…ØµØ±)','Europe/Istanbul':'Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ (ØªØ±ÙƒÙŠØ§)','Europe/London':'Ù„Ù†Ø¯Ù† (Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©)','Europe/Paris':'Ø¨Ø§Ø±ÙŠØ³ (ÙØ±Ù†Ø³Ø§)','America/Los_Angeles':'Ù„ÙˆØ³ Ø£Ù†Ø¬Ù„ÙØ³ (Ø£Ù…Ø±ÙŠÙƒØ§)','America/New_York':'Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ (Ø£Ù…Ø±ÙŠÙƒØ§)','Asia/Karachi':'ÙƒØ±Ø§ØªØ´ÙŠ (Ø¨Ø§ÙƒØ³ØªØ§Ù†)','Asia/Dhaka':'Ø¯ÙƒØ§ (Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´)','Asia/Tokyo':'Ø·ÙˆÙƒÙŠÙˆ (Ø§Ù„ÙŠØ§Ø¨Ø§Ù†)'};
  const EN={'Asia/Riyadh':'Riyadh (KSA)','Asia/Kuwait':'Kuwait','Asia/Dubai':'Dubai (UAE)','Asia/Qatar':'Doha (Qatar)','Asia/Bahrain':'Manama (Bahrain)','Asia/Muscat':'Muscat (Oman)','Africa/Cairo':'Cairo (Egypt)','Europe/Istanbul':'Istanbul (TÃ¼rkiye)','Europe/London':'London (UK)','Europe/Paris':'Paris (France)','America/Los_Angeles':'Los Angeles (USA)','America/New_York':'New York (USA)','Asia/Karachi':'Karachi (Pakistan)','Asia/Dhaka':'Dhaka (Bangladesh)','Asia/Tokyo':'Tokyo (Japan)'};
  const sel=document.getElementById('tzSelect'); if(sel){ sel.innerHTML=''; const LBL=(getLang()==='ar'?AR:EN); zones.forEach(z=>{ const o=document.createElement('option'); o.value=z; o.textContent=LBL[z]||z; sel.appendChild(o); }); sel.value=localStorage.getItem('ageTZ')||'Asia/Riyadh'; sel.onchange=()=>{ localStorage.setItem('ageTZ', sel.value); location.reload(); }; }
}
function nowInTZ(tz){ return new Date(new Date().toLocaleString('en-US',{timeZone:tz})); }
function fmt(n,lang){ try{return n.toLocaleString(lang==='ar'?'ar-EG':'en-US');}catch(e){return ''+n;} }
function weekdayName(date,lang){ const ar=['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª']; const en=['Sun','Mon','Tue','Wed','Thu','Fri','Sat']; return (lang==='ar'?ar:en)[date.getDay()]; }
function seasonName(m,lang){ const ar={winter:'Ø§Ù„Ø´ØªØ§Ø¡',spring:'Ø§Ù„Ø±Ø¨ÙŠØ¹',summer:'Ø§Ù„ØµÙŠÙ',autumn:'Ø§Ù„Ø®Ø±ÙŠÙ'}; const en={winter:'Winter',spring:'Spring',summer:'Summer',autumn:'Autumn'}; const s=[12,1,2].includes(m)?'winter':[3,4,5].includes(m)?'spring':[6,7,8].includes(m)?'summer':'autumn'; return (lang==='ar'?ar:en)[s]; }
function lifeStage(y,lang){ if(lang==='en'){ if(y<13)return'Childhood'; if(y<20)return'Adolescence'; if(y<36)return'Young adult'; if(y<60)return'Middle age'; return'Senior'; } else { if(y<13)return'Ø·ÙÙˆÙ„Ø©'; if(y<20)return'Ù…Ø±Ø§Ù‡Ù‚Ø©'; if(y<36)return'Ø´Ø¨Ø§Ø¨'; if(y<60)return'Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ù…Ø±'; return'ÙƒØ¨ÙŠØ± Ø³Ù†'; } }
// Hijri conversions (tabular, ~approx)
function islamicToJD(y,m,d){ return d + Math.ceil(29.5*(m-1)) + (y-1)*354 + Math.floor((3+11*y)/30) + 1948439.5; }
function jdToGregorian(jd){ const j=Math.floor(jd+0.5); const f=j+1401+Math.floor((Math.floor((4*j+274277)/146097)*3)/4)-38; const e=4*f+3; const g=Math.floor((e%1461)/4); const h=5*g+2; const D=Math.floor((h%153)/5)+1; const M=((Math.floor(h/153)+2)%12)+1; const Y=Math.floor(e/1461)-4716+Math.floor((12+2-M)/12); return {year:Y,month:M,day:D}; }
function gregorianToJD(y,m,d){ if(m<=2){y-=1;m+=12;} const A=Math.floor(y/100); const B=2-A+Math.floor(A/4); return Math.floor(365.25*(y+4716))+Math.floor(30.6001*(m+1))+d+B-1524.5; }
function jdToIslamic(jd){ const jd2=Math.floor(jd)+0.5; const days=jd2-1948439.5; let y=Math.floor((30*days+10646)/10631); let m=Math.min(12, Math.ceil((days-(29+islamicToJD(y,1,1)-1948439.5))/29.5)+1); let d=Math.floor(jd2-islamicToJD(y,m,1))+1; if(d<=0){ m-=1; if(m<1){ m=12; y-=1; } d=Math.floor(jd2-islamicToJD(y,m,1))+1; } return {year:y,month:m,day:d}; }
function hijriToGreg(y,m,d){ return jdToGregorian(islamicToJD(y,m,d)); }
function gregToHijri(dt){ const jd=gregorianToJD(dt.getFullYear(), dt.getMonth()+1, dt.getDate()); return jdToIslamic(jd); }

// Canvas share helpers
const SITE_DOMAIN='age.majeedpng.online'; const NAME_AR='Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø«ÙˆÙŠÙ†ÙŠ', NAME_EN='Abdulmajeed Althuwaini';
function roundRect(ctx,x,y,w,h,r){ctx.beginPath();ctx.moveTo(x+r,y);ctx.arcTo(x+w,y,x+w,y+h,r);ctx.arcTo(x+w,y+h,x,y+h,r);ctx.arcTo(x,y+h,x,y,r);ctx.arcTo(x,y,x+w,y,r);ctx.closePath()}
function pill(ctx,x,y,w,h){const r=h/2;roundRect(ctx,x,y,w,h,r)}
function shareImagePortrait(data, lang){
  const W=1024,H=1536, c=document.createElement('canvas'); c.width=W; c.height=H; const ctx=c.getContext('2d');
  const g=ctx.createLinearGradient(0,0,W,H); g.addColorStop(0,'#0ea5e9'); g.addColorStop(1,'#22c55e'); ctx.fillStyle=g; roundRect(ctx,24,24,W-48,H-48,28); ctx.fill();
  ctx.strokeStyle='rgba(255,255,255,.55)'; ctx.lineWidth=3; roundRect(ctx,24,24,W-48,H-48,28); ctx.stroke();
  ctx.fillStyle='#fff'; ctx.textAlign='center';
  ctx.font='900 56px Tajawal, system-ui'; ctx.fillText(lang==='ar'?'ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ':'Your Age Details', W/2, 120);
  ctx.font='700 34px Tajawal, system-ui'; ctx.fillText(lang==='ar'?NAME_AR:NAME_EN, W/2, 170);
  ctx.font='900 108px Tajawal, system-ui'; ctx.fillText(data.years.toLocaleString(lang==='ar'?'ar-EG':'en-US'), W/2, 280);
  ctx.font='700 28px Tajawal, system-ui'; ctx.fillText(lang==='ar'?'Ø³Ù†Ø©':'years', W/2, 318);
  const kY=360, boxW=210, boxH=120, gap=28, startX=(W-(boxW*4+gap*3))/2;
  const items=[[lang==='ar'?'Ø£Ø´Ù‡Ø±':'Months', data.months],[lang==='ar'?'Ø£Ø³Ø§Ø¨ÙŠØ¹':'Weeks', data.weeks],[lang==='ar'?'Ø£ÙŠØ§Ù…':'Days', data.days],[lang==='ar'?'Ø³Ø§Ø¹Ø§Øª':'Hours', data.hours]];
  for(let i=0;i<4;i++){const x=startX+i*(boxW+gap); ctx.globalAlpha=.9; ctx.fillStyle='rgba(255,255,255,.14)'; pill(ctx,x,kY,boxW,boxH); ctx.fill(); ctx.globalAlpha=1; ctx.fillStyle='#fff'; ctx.font='700 26px Tajawal, system-ui'; ctx.fillText(items[i][0], x+boxW/2, kY+42); ctx.font='900 38px Tajawal, system-ui'; ctx.fillText(items[i][1].toLocaleString(lang==='ar'?'ar-EG':'en-US'), x+boxW/2, kY+88);}
  ctx.font='800 30px Tajawal, system-ui'; ctx.fillText((lang==='ar'?'Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…: ':'Next birthday: ')+data.nextStr, W/2, 646);
  const fx=100, fw=W-200, fh=80, fyStart=700, fgap=24; const facts=[
    (lang==='ar'?'ØªÙÙ†ÙÙÙ‘ÙØ³ØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You breathed about ')+data.breaths.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù…Ø±Ø©':' times'),
    (lang==='ar'?'Ù†ÙØ¨ÙØ¶Ù Ù‚Ù„Ø¨Ùƒ Ø­ÙˆØ§Ù„ÙŠ ':'Your heart beat about ')+data.heartbeats.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù†Ø¨Ø¶Ø©':' times'),
    (lang==='ar'?'Ø¶ÙØ­ÙÙƒØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You laughed about ')+data.laughs.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù…Ø±Ø©':' times'),
    (lang==='ar'?'Ù†ÙÙ…ØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You slept about ')+data.sleepStr,
    (lang==='ar'?'Ø£ÙƒÙ„Øª ':'You ate ')+data.eatStr
  ];
  ctx.font='700 26px Tajawal, system-ui';
  for(let i=0;i<facts.length;i++){ctx.globalAlpha=.85; ctx.fillStyle='rgba(255,255,255,.14)'; pill(ctx,fx,fyStart+i*(fh+fgap),fw,fh); ctx.fill(); ctx.globalAlpha=1; ctx.fillStyle='#fff'; ctx.fillText(facts[i], W/2, fyStart+i*(fh+fgap)+52);}
  ctx.font='700 20px Tajawal, system-ui'; ctx.fillText('Site: age.majeedpng.online', W/2, H-40);
  c.toBlob(b=>{ const url=URL.createObjectURL(b); const a=document.createElement('a'); a.href=url; a.download='age-portrait.png'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),1000); });
}
function shareImageSquare(data, lang){
  const S=1024, c=document.createElement('canvas'); c.width=S; c.height=S; const ctx=c.getContext('2d');
  const g=ctx.createLinearGradient(0,0,S,S); g.addColorStop(0,'#0ea5e9'); g.addColorStop(1,'#22c55e'); ctx.fillStyle=g; roundRect(ctx,24,24,S-48,S-48,28); ctx.fill();
  ctx.strokeStyle='rgba(255,255,255,.55)'; ctx.lineWidth=3; roundRect(ctx,24,24,S-48,S-48,28); ctx.stroke();
  ctx.fillStyle='#fff'; ctx.textAlign='center';
  ctx.font='900 56px Tajawal, system-ui'; ctx.fillText(lang==='ar'?'ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ':'Your Age Details', S/2, 110);
  ctx.font='700 34px Tajawal, system-ui'; ctx.fillText(lang==='ar'?NAME_AR:NAME_EN, S/2, 158);
  ctx.font='900 74px Tajawal, system-ui'; ctx.fillText(data.years.toLocaleString(lang==='ar'?'ar-EG':'en-US'), S/2, 280);
  ctx.font='700 26px Tajawal, system-ui'; ctx.fillText(lang==='ar'?'Ø³Ù†Ø©':'years', S/2, 310);
  const kY=360, boxW=190, boxH=110, gap=26, startX=(S-(boxW*4+gap*3))/2;
  const items=[[lang==='ar'?'Ø£Ø´Ù‡Ø±':'Months', data.months],[lang==='ar'?'Ø£Ø³Ø§Ø¨ÙŠØ¹':'Weeks', data.weeks],[lang==='ar'?'Ø£ÙŠØ§Ù…':'Days', data.days],[lang==='ar'?'Ø³Ø§Ø¹Ø§Øª':'Hours', data.hours]];
  for(let i=0;i<4;i++){const x=startX+i*(boxW+gap); ctx.globalAlpha=.9; ctx.fillStyle='rgba(255,255,255,.14)'; pill(ctx,x,kY,boxW,boxH); ctx.fill(); ctx.globalAlpha=1; ctx.fillStyle='#fff'; ctx.font='700 24px Tajawal, system-ui'; ctx.fillText(items[i][0], x+boxW/2, kY+40); ctx.font='900 34px Tajawal, system-ui'; ctx.fillText(items[i][1].toLocaleString(lang==='ar'?'ar-EG':'en-US'), x+boxW/2, kY+84);}
  ctx.font='800 28px Tajawal, system-ui'; ctx.fillText((lang==='ar'?'Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…: ':'Next birthday: ')+data.nextStr, S/2, 470);
  const fx=80, fw=S-160, fh=76, fyStart=520, fgap=18; const facts=[
    (lang==='ar'?'ØªÙÙ†ÙÙÙ‘ÙØ³ØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You breathed about ')+data.breaths.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù…Ø±Ø©':' times'),
    (lang==='ar'?'Ù†ÙØ¨ÙØ¶Ù Ù‚Ù„Ø¨Ùƒ Ø­ÙˆØ§Ù„ÙŠ ':'Your heart beat about ')+data.heartbeats.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù†Ø¨Ø¶Ø©':' times'),
    (lang==='ar'?'Ø¶ÙØ­ÙÙƒØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You laughed about ')+data.laughs.toLocaleString(lang==='ar'?'ar-EG':'en-US')+(lang==='ar'?' Ù…Ø±Ø©':' times'),
    (lang==='ar'?'Ù†ÙÙ…ØªÙ Ø­ÙˆØ§Ù„ÙŠ ':'You slept about ')+data.sleepStr,
    (lang==='ar'?'Ø£ÙƒÙ„Øª ':'You ate ')+data.eatStr
  ];
  ctx.font='700 24px Tajawal, system-ui';
  for(let i=0;i<facts.length;i++){ctx.globalAlpha=.85; ctx.fillStyle='rgba(255,255,255,.14)'; pill(ctx,fx,fyStart+i*(fh+fgap),fw,fh); ctx.fill(); ctx.globalAlpha=1; ctx.fillStyle='#fff'; ctx.fillText(facts[i], S/2, fyStart+i*(fh+fgap)+50);}
  ctx.font='700 18px Tajawal, system-ui'; ctx.fillText('Site: age.majeedpng.online', S/2, S-38);
  c.toBlob(b=>{ const url=URL.createObjectURL(b); const a=document.createElement('a'); a.href=url; a.download='age-square.png'; a.click(); setTimeout(()=>URL.revokeObjectURL(url),1000); });
}

// Utils
function toYMD(dd){ const y=Math.floor(dd/365.25); dd-=y*365.25; const mo=Math.floor(dd/30.4375); dd-=mo*30.4375; const d=Math.round(dd); return {y,mo,d}; }
function buildShareLink(b){ const q=new URLSearchParams(); q.set('type', b.type); q.set('d', b.input.d); q.set('m', b.input.m); q.set('y', b.input.y); q.set('lang', getLang()); q.set('theme', localStorage.getItem('ageTheme')||'dark'); q.set('accent', encodeURIComponent(localStorage.getItem('ageAccent')||'#6366f1,#8b5cf6')); q.set('go','1'); return `index.html?${q.toString()}`; }
let cdTimer=null;
function startCountdown(target, tz, lang){
  if(cdTimer) clearInterval(cdTimer);
  const update=()=>{ const now=nowInTZ(tz); let diff=target-now; if(diff<0) diff=0; const s=Math.floor(diff/1000); const d=Math.floor(s/86400); const h=Math.floor((s%86400)/3600); const m=Math.floor((s%3600)/60); const sec=s%60;
    document.getElementById('cdDays').textContent=fmt(d,lang);
    document.getElementById('cdHours').textContent=fmt(h,lang);
    document.getElementById('cdMin').textContent=fmt(m,lang);
    document.getElementById('cdSec').textContent=fmt(sec,lang);
  };
  update(); cdTimer=setInterval(update,1000);
}

// Only-English LTR for dynamic content
function enforceLTRDynamic(){
  const L=getLang();
  const ids=['gregInfo','hijriInfo','sleepTag','sleepBanner','breathsLine','heartbeatsLine','laughsLine','sleptLine','eatenLine','weekday','season','lifeStage','cdDays','cdHours','cdMin','cdSec'];
  ids.forEach(id=>{ const el=document.getElementById(id); if(!el) return; if(L==='en') el.classList.add('ltr'); else el.classList.remove('ltr'); });
}

function calcAndRender(){
  const raw=localStorage.getItem('birthInfo'); const lang=getLang(); const tz=localStorage.getItem('ageTZ')||'Asia/Riyadh';
  if(!raw){ document.getElementById('noData').style.display='block'; applyI18n(); setupSettings(); return; }
  const b=JSON.parse(raw); const gY=b.greg.gY, gM=b.greg.gM, gD=b.greg.gD;
  const birth=new Date(gY,gM-1,gD); const nowTZ=nowInTZ(tz); const ageMs=nowTZ-birth; if(ageMs<0){ document.getElementById('noData').style.display='block'; return; }
  const dayMs=86400000; const days=Math.floor(ageMs/dayMs); const hours=Math.floor(ageMs/(3600000));
  const years=(nowTZ.getFullYear()-gY)-(((nowTZ.getMonth()+1)<gM)||((nowTZ.getMonth()+1===gM)&&(nowTZ.getDate()<gD))?1:0);
  let months=years*12+(nowTZ.getMonth()+1)-gM; if(nowTZ.getDate()<gD) months-=1; const weeks=Math.floor(days/7);

  // Hijri age
  const birthH=gregToHijri(new Date(gY,gM-1,gD)); const nowH=gregToHijri(nowTZ);
  let hy=nowH.year-birthH.year; let hm=nowH.month-birthH.month; let hd=nowH.day-birthH.day; if(hd<0){hd+=30;hm-=1;} if(hm<0){hm+=12;hy-=1;}
  const useHijri=(b.type==='hijri'); const yearsTop=useHijri?hy:years; const monthsTop=useHijri?(hy*12+hm):months;

  // KPIs
  document.getElementById('yearsAge').textContent=fmt(yearsTop,lang);
  document.getElementById('monthsAge').textContent=fmt(monthsTop,lang);
  document.getElementById('weeksAge').textContent=fmt(weeks,lang);
  document.getElementById('daysAge').textContent=fmt(days,lang);
  document.getElementById('hoursAge').textContent=fmt(hours,lang);

  document.getElementById('weekday').textContent=weekdayName(new Date(gY,gM-1,gD),lang);
  document.getElementById('season').textContent=seasonName(gM,lang);
  document.getElementById('lifeStage').textContent=lifeStage(years,lang);

  // Healthy sleep RANGE by age (approx bands)
  function sleepRangeByAge(ageY){ if(ageY<0.25) return [14,17]; if(ageY<1) return [12,15]; if(ageY<3) return [11,14]; if(ageY<6) return [10,13]; if(ageY<14) return [9,11]; if(ageY<18) return [8,10]; if(ageY<65) return [7,9]; return [7,8]; }
  const sr = sleepRangeByAge(years);
  const sleepTag=document.getElementById('sleepTag'); const sleepBanner=document.getElementById('sleepBanner');
  if(lang==='ar'){ sleepTag.textContent='Ù†ÙˆÙ…Ùƒ Ø§Ù„ØµØ­ÙŠ: Ù…Ù† '+fmt(sr[0],'ar')+' Ø¥Ù„Ù‰ '+fmt(sr[1],'ar')+' Ø³Ø§Ø¹Ø§Øª'; sleepBanner.textContent='Ù‚ÙŠÙ…Ø© ØªÙ‚Ø¯ÙŠØ±ÙŠØ© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ø± (Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©).'; }
  else{ sleepTag.textContent='Healthy sleep: from '+fmt(sr[0],'en')+' to '+fmt(sr[1],'en')+' hours'; sleepBanner.textContent='Approximate age-based range (general guidelines).'; }
  sleepBanner.style.display='block';

  // Next birthdays & countdown (use chosen type for target)
  let nextTarget; if(useHijri){ let nHy=nowH.year; if(nowH.month>birthH.month|| (nowH.month===birthH.month && nowH.day>=birthH.day)) nHy+=1; const gNext=hijriToGreg(nHy,birthH.month,birthH.day); nextTarget=new Date(gNext.year,gNext.month-1,gNext.day); }
  else{ nextTarget=new Date(nowTZ.getFullYear(),gM-1,gD); if(nextTarget<nowTZ) nextTarget=new Date(nowTZ.getFullYear()+1,gM-1,gD); }
  const nextBDayName=weekdayName(nextTarget,lang); const tzText=(lang==='ar'
    ? {'Asia/Riyadh':'Ø§Ù„Ø±ÙŠØ§Ø¶ (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)','Asia/Kuwait':'Ø§Ù„ÙƒÙˆÙŠØª','Asia/Dubai':'Ø¯Ø¨ÙŠ (Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª)','Asia/Qatar':'Ø§Ù„Ø¯ÙˆØ­Ø© (Ù‚Ø·Ø±)','Asia/Bahrain':'Ø§Ù„Ù…Ù†Ø§Ù…Ø© (Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†)','Asia/Muscat':'Ù…Ø³Ù‚Ø· (Ø¹ÙÙ…Ø§Ù†)','Africa/Cairo':'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© (Ù…ØµØ±)','Europe/Istanbul':'Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„ (ØªØ±ÙƒÙŠØ§)','Europe/London':'Ù„Ù†Ø¯Ù† (Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©)','Europe/Paris':'Ø¨Ø§Ø±ÙŠØ³ (ÙØ±Ù†Ø³Ø§)','America/Los_Angeles':'Ù„ÙˆØ³ Ø£Ù†Ø¬Ù„ÙØ³ (Ø£Ù…Ø±ÙŠÙƒØ§)','America/New_York':'Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ (Ø£Ù…Ø±ÙŠÙƒØ§)','Asia/Karachi':'ÙƒØ±Ø§ØªØ´ÙŠ (Ø¨Ø§ÙƒØ³ØªØ§Ù†)','Asia/Dhaka':'Ø¯ÙƒØ§ (Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´)','Asia/Tokyo':'Ø·ÙˆÙƒÙŠÙˆ (Ø§Ù„ÙŠØ§Ø¨Ø§Ù†)'}[tz]||tz
    : {'Asia/Riyadh':'Riyadh (KSA)','Asia/Kuwait':'Kuwait','Asia/Dubai':'Dubai (UAE)','Asia/Qatar':'Doha (Qatar)','Asia/Bahrain':'Manama (Bahrain)','Asia/Muscat':'Muscat (Oman)','Africa/Cairo':'Cairo (Egypt)','Europe/Istanbul':'Istanbul (TÃ¼rkiye)','Europe/London':'London (UK)','Europe/Paris':'Paris (France)','America/Los_Angeles':'Los Angeles (USA)','America/New_York':'New York (USA)','Asia/Karachi':'Karachi (Pakistan)','Asia/Dhaka':'Dhaka (Bangladesh)','Asia/Tokyo':'Tokyo (Japan)'}[tz]||tz);
  const remMs=nextTarget-nowTZ; const rDays=Math.max(0, Math.floor(remMs/dayMs)); const rHours=Math.max(0, Math.floor((remMs-rDays*dayMs)/3600000));
  document.getElementById('gregInfo').innerHTML=(lang==='ar'
    ? `ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: <b>${gD}-${gM}-${gY}</b><br>Ø§Ù„Ø¹Ù…Ø±: <b>${fmt(years,'ar')}</b> Ø³Ù†Ø© Ùˆ <b>${fmt(months%12,'ar')}</b> Ø´Ù‡Ø± Ùˆ <b>${fmt((days%30),'ar')}</b> ÙŠÙˆÙ…<br>Ø¨Ø§Ù‚ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…: <b>${fmt(rDays,'ar')}</b> ÙŠÙˆÙ… Ùˆ <b>${fmt(rHours,'ar')}</b> Ø³Ø§Ø¹Ø©<br>Ø³ÙŠÙƒÙˆÙ† Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ ÙŠÙˆÙ… <b>${nextBDayName}</b> Ø§Ù„Ù…ÙˆØ§ÙÙ‚ <b>${nextTarget.getDate()}-${nextTarget.getMonth()+1}-${nextTarget.getFullYear()}</b> (Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${tzText})`
    : `Birthdate: <b>${gD}-${gM}-${gY}</b><br>Age: <b>${fmt(years,'en')}</b> years, <b>${fmt(months%12,'en')}</b> months, <b>${fmt((days%30),'en')}</b> days<br>Until next birthday: <b>${fmt(rDays,'en')}</b> days and <b>${fmt(rHours,'en')}</b> hours<br>Next birthday on <b>${nextBDayName}</b> <b>${nextTarget.getDate()}-${nextTarget.getMonth()+1}-${nextTarget.getFullYear()}</b> (Time Zone: ${tzText})`);

  // Hijri info
  const nowH2=gregToHijri(nowTZ); let targetHy=nowH2.year; if(nowH2.month>birthH.month || (nowH2.month===birthH.month && nowH2.day>=birthH.day)) targetHy+=1;
  const nxtH=hijriToGreg(targetHy,birthH.month,birthH.day); const nxtHDate=new Date(nxtH.year,nxtH.month-1,nxtH.day);
  const remMsH=nxtHDate-nowTZ; const rDaysH=Math.max(0,Math.floor(remMsH/dayMs)); const rHoursH=Math.max(0, Math.floor((remMsH-rDaysH*dayMs)/3600000));
  const nextNameH=weekdayName(nxtHDate,lang);
  document.getElementById('hijriInfo').innerHTML=(lang==='ar'
    ? `ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: <b>${birthH.day}-${birthH.month}-${birthH.year} Ù‡Ù€</b><br>Ø§Ù„Ø¹Ù…Ø±: <b>${fmt(hy,'ar')}</b> Ø³Ù†Ø© Ùˆ <b>${fmt(hm,'ar')}</b> Ø´Ù‡Ø± Ùˆ <b>${fmt(hd,'ar')}</b> ÙŠÙˆÙ… (Ø­Ø³Ø§Ø¨ ØªÙ‚Ø±ÙŠØ¨ÙŠ)<br>Ø¨Ø§Ù‚ÙŠ Ù„Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù…: <b>${fmt(rDaysH,'ar')}</b> ÙŠÙˆÙ… Ùˆ <b>${fmt(rHoursH,'ar')}</b> Ø³Ø§Ø¹Ø©<br>Ø³ÙŠÙƒÙˆÙ† Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙŠÙˆÙ… <b>${nextNameH}</b> Ø§Ù„Ù…ÙˆØ§ÙÙ‚ <b>${nxtHDate.getDate()}-${nxtHDate.getMonth()+1}-${nxtHDate.getFullYear()}</b>`
    : `Birth (Hijri): <b>${birthH.day}-${birthH.month}-${birthH.year} AH</b><br>Age: <b>${fmt(hy,'en')}</b> years, <b>${fmt(hm,'en')}</b> months, <b>${fmt(hd,'en')}</b> days (approx.)<br>Until next Hijri birthday: <b>${fmt(rDaysH,'en')}</b> days and <b>${fmt(rHoursH,'en')}</b> hours<br>Next Hijri birthday on <b>${nextNameH}</b> <b>${nxtHDate.getDate()}-${nxtHDate.getMonth()+1}-${nxtHDate.getFullYear()}</b>`);

  // Facts (approximate)
  const breathsPerDay=20000, bpm=80, laughsPerDay=10, sleepHours=8, eatMinutes=80;
  const breaths=breathsPerDay*days; const heartbeats=Math.round(bpm*60*24*days); const laughs=laughsPerDay*days;
  const s=toYMD((sleepHours/24)*days); const e=toYMD((eatMinutes/60/24)*days);
  if(lang==='ar') { 
    document.getElementById('breathsLine').textContent='ØªÙÙ†ÙÙÙ‘ÙØ³ØªÙ Ø­ÙˆØ§Ù„ÙŠ '+fmt(breaths,'ar')+' Ù…Ø±Ø©';
    document.getElementById('heartbeatsLine').textContent='Ù†ÙØ¨ÙØ¶Ù Ù‚Ù„Ø¨Ùƒ Ø­ÙˆØ§Ù„ÙŠ '+fmt(heartbeats,'ar')+' Ù†Ø¨Ø¶Ø©';
    document.getElementById('laughsLine').textContent='Ø¶ÙØ­ÙÙƒØªÙ Ø­ÙˆØ§Ù„ÙŠ '+fmt(laughs,'ar')+' Ù…Ø±Ø©';
    document.getElementById('sleptLine').textContent='Ù†ÙÙ…ØªÙ Ø­ÙˆØ§Ù„ÙŠ '+fmt(s.y,'ar')+' Ø³Ù†Ø© Ùˆ '+fmt(s.mo,'ar')+' Ø´Ù‡Ø± Ùˆ '+fmt(s.d,'ar')+' ÙŠÙˆÙ…';
    document.getElementById('eatenLine').textContent='Ø£Ù…Ø¶ÙŠØª ÙÙŠ ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø·Ø¹Ø§Ù… '+fmt(e.y,'ar')+' Ø³Ù†Ø© Ùˆ '+fmt(e.mo,'ar')+' Ø´Ù‡Ø± Ùˆ '+fmt(e.d,'ar')+' ÙŠÙˆÙ…';
  } else {
    document.getElementById('breathsLine').textContent='You breathed about '+fmt(breaths,'en')+' times';
    document.getElementById('heartbeatsLine').textContent='Your heart beat about '+fmt(heartbeats,'en')+' times';
    document.getElementById('laughsLine').textContent='You laughed about '+fmt(laughs,'en')+' times';
    document.getElementById('sleptLine').textContent='You slept about '+fmt(s.y,'en')+' years, '+fmt(s.mo,'en')+' months, and '+fmt(s.d,'en')+' days';
    document.getElementById('eatenLine').textContent='You ate '+fmt(e.y,'en')+' years, '+fmt(e.mo,'en')+' months, and '+fmt(e.d,'en')+' days';
  }

  // Share & copy
  document.getElementById('shareBtn').onclick=()=>{ const yearsS=useHijri?hy:years; const monthsS=useHijri?(hy*12+hm):months;
    shareImagePortrait({years:yearsS, months:monthsS, weeks, days, hours, nextStr:`${weekdayName(nextTarget,lang)} ${nextTarget.getDate()}-${nextTarget.getMonth()+1}-${nextTarget.getFullYear()}`, breaths, heartbeats, laughs,
      sleepStr:(lang==='ar'?`${fmt(s.y,'ar')} Ø³Ù†Ø© ${fmt(s.mo,'ar')} Ø´Ù‡Ø± ${fmt(s.d,'ar')} ÙŠÙˆÙ…`:`${fmt(s.y,'en')} years, ${fmt(s.mo,'en')} months, and ${fmt(s.d,'en')} days`),
      eatStr:(lang==='ar'?`${fmt(e.y,'ar')} Ø³Ù†Ø© ${fmt(e.mo,'ar')} Ø´Ù‡Ø± ${fmt(e.d,'ar')} ÙŠÙˆÙ…`:`${fmt(e.y,'en')} years, ${fmt(e.mo,'en')} months, and ${fmt(e.d,'en')} days`) }, lang); };
  document.getElementById('shareSquareBtn').onclick=()=>{ const yearsS=useHijri?hy:years; const monthsS=useHijri?(hy*12+hm):months;
    shareImageSquare({years:yearsS, months:monthsS, weeks, days, hours, nextStr:`${weekdayName(nextTarget,lang)} ${nextTarget.getDate()}-${nextTarget.getMonth()+1}-${nextTarget.getFullYear()}`, breaths, heartbeats, laughs,
      sleepStr:(lang==='ar'?`${fmt(s.y,'ar')} Ø³Ù†Ø© ${fmt(s.mo,'ar')} Ø´Ù‡Ø± ${fmt(s.d,'ar')} ÙŠÙˆÙ…`:`${fmt(s.y,'en')} years, ${fmt(s.mo,'en')} months, and ${fmt(s.d,'en')} days`),
      eatStr:(lang==='ar'?`${fmt(e.y,'ar')} Ø³Ù†Ø© ${fmt(e.mo,'ar')} Ø´Ù‡Ø± ${fmt(e.d,'ar')} ÙŠÙˆÙ…`:`${fmt(e.y,'en')} years, ${fmt(e.mo,'en')} months, and ${fmt(e.d,'en')} days`) }, lang); };
  document.getElementById('copyLinkBtn').onclick=()=>{ const link=buildShareLink(b); if(navigator.clipboard) navigator.clipboard.writeText(link); const toast=document.querySelector('.copy-toast'); toast.textContent=(lang==='ar'?'ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…':'Copied âœ…'); toast.style.display='block'; setTimeout(()=>toast.style.display='none',1500); };

  document.getElementById('contentArea').style.display='grid';
  enforceLTRDynamic();

  // Birthday style (Gregorian)
  if(nowTZ.getDate()===gD && (nowTZ.getMonth()+1)===gM) document.body.classList.add('birthday');

  // Start countdown
  startCountdown(nextTarget, tz, lang);
}

document.getElementById('openCustomize').onclick=()=>{ const p=document.getElementById('settings'); p.style.display=p.style.display==='none'?'block':'none'; };

// Init
applyI18n(); setupSettings(); enforceLTRDynamic(); calcAndRender();
</script>
</body>
</html>

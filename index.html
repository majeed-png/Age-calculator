<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± â€“ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® | Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø«ÙˆÙŠÙ†ÙŠ</title>
<meta name="description" content="Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©: Ø§Ø­Ø³Ø¨ Ø¹Ù…Ø±Ùƒ Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø£Ùˆ Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ¨Ø¯Ù‚Ø©. ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª.">
<meta name="keywords" content="Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø±, Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±, Ø§Ø­Ø³Ø¨ Ø¹Ù…Ø±Ùƒ, Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ, Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ, ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®, Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ø§Ø´Ù‡Ø±, ÙƒÙ… Ø¹Ù…Ø±ÙŠ, ÙƒÙ… Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ÙŠ, ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…Ø±, Age Calculator Arabic, Hijri to Gregorian, Gregorian to Hijri, Ø­Ø³Ø§Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯, Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ, Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰">
<meta property="og:title" content="Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± â€“ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ®">
<meta property="og:description" content="Ø§Ø­Ø³Ø¨ Ø¹Ù…Ø±Ùƒ Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ Ø£Ùˆ Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰) Ø¨Ø³Ø±Ø¹Ø© ÙˆØ¨Ø¯Ù‚Ø©.">
<style>
:root{
  --bg:#0f1115;
  --card:#151a22;
  --text:#e9eef6;
  --muted:#a8b3c7;
  --accent:#6d62ff; /* default accent */
  --accent-2:#6d62ff;
  --radius:14px;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
  --font: "Tajawal", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic", "Noto Sans Arabic", Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* LIGHT THEME (made darker/warmer for contrast) */
:root[data-theme='light']{
  --bg:#e7ecf3;            /* was very bright; now darker */
  --card:#f1f4f9;
  --text:#0b0f14;
  --muted:#4b5565;
}
/* AMOLED true black */
:root[data-theme='amoled']{
  --bg:#000000;
  --card:#0a0a0a;
  --text:#e9eef6;
  --muted:#a8b3c7;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
     radial-gradient(1200px 600px at 100% -10%, rgba(124,92,255,.10), transparent 60%),
     radial-gradient(1200px 600px at -30% 110%, rgba(46,211,198,.08), transparent 60%),
     var(--bg);
  color:var(--text);
  font-family:var(--font);
  line-height:1.7;
}
:root[data-theme='light'] body,
:root[data-theme='light']{
  background:
     radial-gradient(1200px 600px at 100% -10%, rgba(124,92,255,.06), transparent 60%),
     radial-gradient(1200px 600px at -30% 110%, rgba(46,211,198,.06), transparent 60%),
     var(--bg);
}

.container{max-width:1000px;margin:24px auto;padding:16px}
.card{
  background:var(--card);
  border:1px solid rgba(255,255,255,.06);
  border-radius: var(--radius);
  padding:18px;
  box-shadow: var(--shadow);
  margin-top:16px;
}
:root[data-theme='light'] .card{border:1px solid rgba(10,10,10,.08)}
h1{margin:0 0 8px 0;font-weight:800;letter-spacing:.2px}
h2{margin:22px 0 10px 0;font-weight:800}
h3{margin:14px 0 10px 0;font-weight:800}
a{color:var(--accent)}
label{display:block;font-weight:700;margin-bottom:6px}
input, select, button{
  width:100%;
  border-radius:12px;
  padding:12px 14px;
  height:52px;
  background:#0c0f14;
  color:var(--text);
  border:1px solid rgba(255,255,255,.08);
  outline:none;
  transition: box-shadow .2s, border-color .2s;
}
:root[data-theme='light'] input,
:root[data-theme='light'] select,
:root[data-theme='light'] button{
  background:#e9edf4;
  border:1px solid rgba(0,0,0,.10);
  color:#0b0f14;
}
input:focus, select:focus{
  box-shadow:0 0 0 3px color-mix(in oklab, var(--accent) 38%, transparent);
  border-color: var(--accent);
}
button{
  cursor:pointer;
  border:none;
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:white;
  font-weight:800;
}
.muted{color:var(--muted)}
.notice{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:14px;margin-top:10px}
:root[data-theme='light'] .notice{background:#eef3fa;border:1px dashed rgba(0,0,0,.12)}
.navbar{
  display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px
}
.navbar .row{display:flex;gap:10px;flex-wrap:nowrap}
.badge{
  display:inline-flex;gap:8px;align-items:center;
  padding:6px 10px;border-radius:999px;
  background:rgba(255,255,255,.06);font-weight:700
}
.inputs{display:grid;grid-template-columns:1fr 1fr;gap:12px;align-items:end}
@media(max-width:800px){.inputs{grid-template-columns:1fr}}
.kpis{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
@media(max-width:900px){.kpis{grid-template-columns:repeat(2,1fr)}}
.kpi{background:#0c0f14;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:14px}
:root[data-theme='light'] .kpi{background:#e9edf4;border:1px solid rgba(0,0,0,.08)}
.kpi .num{font-size:1.6rem;font-weight:900}
.tag{padding:6px 10px;border-radius:12px;background:rgba(255,255,255,.08);font-weight:700}
:root[data-theme='light'] .tag{background:#e9edf4}
footer{opacity:.7;padding:20px 6px}
.panel{display:none;margin-top:10px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.theme-btn{
  padding:12px 14px;border-radius:12px;background:#0c0f14;border:1px solid rgba(255,255,255,.14);
  cursor:pointer;color:var(--text)!important;min-width:140px;text-align:center;position:relative;
}
:root[data-theme='light'] .theme-btn{background:#e9edf4;border:1px solid rgba(0,0,0,.12);color:#0b0f14!important}
.theme-btn.selected{outline:3px solid var(--accent); outline-offset:3px; border-color:var(--accent)}
.color-dot{width:26px;height:26px;border-radius:50%;border:2px solid rgba(255,255,255,.5);cursor:pointer;position:relative}
:root[data-theme='light'] .color-dot{border-color:rgba(0,0,0,.35)}
.color-dot.selected::after{
  content:"âœ“"; position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-weight:900; color:#000; mix-blend-mode:screen;
}
.small-btn{min-width:56px;}

/* Custom select wrapper for consistent height */
.select-wrap{position:relative}
.select-wrap select{appearance:none;-webkit-appearance:none;padding-inline-start:14px;padding-inline-end:40px}
.select-wrap .caret{
  position:absolute; left:12px; top:50%; transform:translateY(-50%); pointer-events:none; opacity:.7;
}

/* i18n helper (just styling) */
.lang-chip{padding:8px 12px;border-radius:12px;background:#0c0f14;border:1px solid rgba(255,255,255,.14);cursor:pointer}
.lang-chip.selected{outline:3px solid var(--accent); outline-offset:3px}

.share-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.share-btn{max-width:200px}

.inputs{grid-template-columns:repeat(4,1fr)}
@media(max-width:800px){.inputs{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
  <div class="navbar">
    <div class="badge" data-i18n="app_badge">âš¡ Ø¢Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±</div>
    <div class="row">
      <button id="openCustomize" style="max-width:160px" data-i18n="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
  </div>

  
<div id="customizePanel" class="panel card" style="margin-top:8px">
  <h3 data-i18n="settings_title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
  <h4 data-i18n="background">Ø§Ù„Ø®Ù„ÙÙŠØ©</h4>
  <div class="row">
    <div class="theme-btn" data-theme="light" data-i18n="theme_light">ÙØ§ØªØ­</div>
    <div class="theme-btn" data-theme="dark" data-i18n="theme_dark">Ø¯Ø§ÙƒÙ†</div>
    <div class="theme-btn" data-theme="amoled" data-i18n="theme_amoled">Ø£Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ (AMOLED)</div>
  </div>
  <hr/>
  <h4 data-i18n="button_color">Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±</h4>
  <div class="row" id="accentRow">
    <div class="color-dot" data-accent="#6d62ff" style="background:#6d62ff"></div>
    <div class="color-dot" data-accent="#2ed3c6" style="background:#2ed3c6"></div>
    <div class="color-dot" data-accent="#f97316" style="background:#f97316"></div>
    <div class="color-dot" data-accent="#22c55e" style="background:#22c55e"></div>
    <div class="color-dot" data-accent="#06b6d4" style="background:#06b6d4"></div>
    <div class="color-dot" data-accent="#ef4444" style="background:#ef4444"></div>
  </div>
  <hr/>
  <h4 data-i18n="language">Ø§Ù„Ù„ØºØ©</h4>
  <div class="row">
    <div class="lang-chip" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
    <div class="lang-chip" data-lang="en">English</div>
  </div>
  <hr/>
  <h4 data-i18n="timezone">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</h4>
  <div class="row">
    <select id="tzSelect" style="max-width:360px">
      <option value="Asia/Riyadh">Asia/Riyadh (KSA)</option>
      <option value="Asia/Dubai">Asia/Dubai (UAE)</option>
      <option value="Africa/Cairo">Africa/Cairo (EG)</option>
      <option value="Europe/London">Europe/London (UK)</option>
      <option value="Europe/Paris">Europe/Paris (FR)</option>
      <option value="America/New_York">America/New_York (US)</option>
      <option value="America/Los_Angeles">America/Los_Angeles (US)</option>
      <option value="Asia/Tokyo">Asia/Tokyo (JP)</option>
      <option value="Asia/Istanbul">Asia/Istanbul (TR)</option>
    </select>
  </div>
  <div class="muted" style="margin-top:8px" data-i18n="settings_hint">Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± â€” Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ† Ø£Ø¹Ù„Ø§Ù‡. ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</div>
</div>


  <div class="card">
    <h1 data-i18n="input_title">Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯Ùƒ</h1>
    <div class="muted" data-i18n="input_hint">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø«Ù… Ø§ÙƒØªØ¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„Ø³Ù†Ø©.</div>
    <div class="notice" style="margin-top:10px" data-i18n="hijri_notice">Ø§Ù„ØªØ­ÙˆÙŠÙ„ <b>Ø§Ù„Ù‡Ø¬Ø±ÙŠ</b> Ù‡Ù†Ø§ ÙˆÙÙ‚ <b>ØªÙ‚ÙˆÙŠÙ… Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰</b> Ù„Ù„ÙØªØ±Ø© 1937â€“2077 (Ù‚Ø¯ ÙŠØ®ØªÙ„Ù Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø·Ø§Ù‚).</div>
    <div class="inputs" style="margin-top:10px">
      <div class="select-wrap">
        <label data-i18n="type_label">Ù†ÙˆØ¹ Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
        <select id="calType">
          <option value="greg" data-i18n="gregorian">Ù…ÙŠÙ„Ø§Ø¯ÙŠ</option>
          <option value="hijri" data-i18n="hijri">Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)</option>
        </select>
        <div class="caret">â–¾</div>
      </div>
      <div>
        <label data-i18n="day">Ø§Ù„ÙŠÙˆÙ…</label>
        <input id="day" type="number" min="1" max="31" placeholder="1">
      </div>
      <div>
        <label data-i18n="month">Ø§Ù„Ø´Ù‡Ø±</label>
        <input id="month" type="number" min="1" max="12" placeholder="1">
      </div>
      <div>
        <label data-i18n="year">Ø§Ù„Ø³Ù†Ø©</label>
        <input id="year" type="number" min="1" max="9999" placeholder="1410 Ø£Ùˆ 1998">
      </div>
    </div>
    <div class="row" style="margin-top:12px">
      <button id="calcBtn" style="max-width:200px" data-i18n="calc">Ø§Ø­Ø³Ø¨</button>
    </div>
  </div>

  <footer class="container">
    ØµÙÙ†ÙØ¹ Ù„Ù€ <b>Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø«ÙˆÙŠÙ†ÙŠ</b> Â· ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª Â· Â© <span id="yearNow"></span>
  </footer>
</div>

<script>
const $ = (id)=>document.getElementById(id);
const fmt = (n, lang='ar')=> Number.isFinite(n) ? n.toLocaleString(lang==='ar'?'ar-SA':'en') : 'â€”';

/* i18n */
const I18N = {
  ar: {
    app_badge: "âš¡ Ø¢Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±",
    settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
    settings_title: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
    background: "Ø§Ù„Ø®Ù„ÙÙŠØ©",
    theme_light: "ÙØ§ØªØ­",
    theme_dark: "Ø¯Ø§ÙƒÙ†",
    theme_amoled: "Ø£Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ (AMOLED)",
    button_color: "Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±",
    language: "Ø§Ù„Ù„ØºØ©",
    timezone: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©",
    settings_hint: "Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ø§ ØªØºÙŠÙ‘Ø± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± â€” Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ† Ø£Ø¹Ù„Ø§Ù‡. ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.",
    input_title: "Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯Ùƒ",
    input_hint: "Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø«Ù… Ø§ÙƒØªØ¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„Ø³Ù†Ø©.",
    hijri_notice: "Ø§Ù„ØªØ­ÙˆÙŠÙ„ <b>Ø§Ù„Ù‡Ø¬Ø±ÙŠ</b> Ù‡Ù†Ø§ ÙˆÙÙ‚ <b>ØªÙ‚ÙˆÙŠÙ… Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰</b> Ù„Ù„ÙØªØ±Ø© 1937â€“2077 (Ù‚Ø¯ ÙŠØ®ØªÙ„Ù Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø·Ø§Ù‚).",
    type_label: "Ù†ÙˆØ¹ Ø§Ù„ØªØ§Ø±ÙŠØ®",
    gregorian: "Ù…ÙŠÙ„Ø§Ø¯ÙŠ",
    hijri: "Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)",
    day: "Ø§Ù„ÙŠÙˆÙ…",
    month: "Ø§Ù„Ø´Ù‡Ø±",
    year: "Ø§Ù„Ø³Ù†Ø©",
    calc: "Ø§Ø­Ø³Ø¨",
    details_badge: "ğŸ¯ ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ø±Ùƒ",
    birthday_today: "Ø§Ù„ÙŠÙˆÙ… Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ! ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†Øª Ø¨Ø®ÙŠØ± ğŸ‰",
    metrics_title: "Ø¹Ù…Ø±Ùƒ Ø¨ØµÙŠØº ÙˆØ£Ø´ÙƒØ§Ù„ Ù…Ø®ØªÙ„ÙØ©",
    years: "Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª",
    months: "Ø¨Ø§Ù„Ø£Ø´Ù‡Ø±",
    weeks: "Ø¨Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹",
    days: "Ø¨Ø§Ù„Ø£ÙŠØ§Ù…",
    hours: "Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª",
    more_info: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± Ø¹Ù† Ø¹Ù…Ø±Ùƒ",
    born_day: "ÙˆÙ„Ø¯Øª ÙŠÙˆÙ…: ",
    born_season: "ÙˆÙ„Ø¯Øª ÙÙŠ ÙØµÙ„: ",
    life_stage: "Ù…Ø±Ø­Ù„Ø© Ø­ÙŠØ§ØªÙƒ: ",
    sleep: "Ù†ÙˆÙ…Ùƒ Ø§Ù„ØµØ­ÙŠ: Ù…Ù† 7 Ø¥Ù„Ù‰ 9 Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§",
    greg_age: "Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ",
    hijri_age: "Ø§Ù„Ø¹Ù…Ø± Ø¨Ø§Ù„Ù‡Ø¬Ø±ÙŠ (Ø£Ù… Ø§Ù„Ù‚Ø±Ù‰)",
    facts: "Ø­Ù‚Ø§Ø¦Ù‚ Ø­ØµÙ„Øª ÙÙŠ Ø­ÙŠØ§ØªÙƒ",
    breaths: "ØªÙÙ†ÙÙÙ‘ÙØ³Øª",
    heartbeats: "Ù†ÙØ¨ÙØ¶ Ù‚Ù„Ø¨Ùƒ",
    laughs: "Ø¶Ø­ÙƒØª",
    slept: "Ù†Ù…Øª",
    eaten: "Ø£Ù…Ø¶ÙŠØª ÙÙŠ ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø·Ø¹Ø§Ù…",
    clarify: "Ù…Ø¹Ø¯Ù„Ø§Øª ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ø«Ø§Ø¨ØªØ©: Ù¢Ù  Ø£Ù„Ù Ù†ÙÙÙØ³/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ù†Ø¨Ø¶Ø©/Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ù¡Ù  Ø¶Ø­ÙƒØ§Øª/ÙŠÙˆÙ…ØŒ Ù¨ Ø³Ø§Ø¹Ø§Øª Ù†ÙˆÙ…/ÙŠÙˆÙ…ØŒ Ù¨Ù  Ø¯Ù‚ÙŠÙ‚Ø© Ø·Ø¹Ø§Ù…/ÙŠÙˆÙ….",
    no_birth: "Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ù…ÙŠÙ„Ø§Ø¯ Ø¨Ø¹Ø¯.",
    go_input: "Ø§Ø°Ù‡Ø¨ Ù„ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„",
    share_image: "Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø©"
  },
  en: {
    app_badge: "âš¡ Age Calculator",
    settings: "Settings",
    settings_title: "Settings",
    background: "Background",
    theme_light: "Light",
    theme_dark: "Dark",
    theme_amoled: "Pure Black (AMOLED)",
    button_color: "Button Color",
    language: "Language",
    timezone: "Time Zone",
    settings_hint: "Background doesnâ€™t change button color â€” pick a color above. Your preferences are saved automatically.",
    input_title: "Enter Your Birthdate",
    input_hint: "Choose date type, then fill day, month, and year.",
    hijri_notice: "Hijri conversion uses the Umm al-Qura calendar for 1937â€“2077 (outside this range it may differ).",
    type_label: "Date type",
    gregorian: "Gregorian",
    hijri: "Hijri (Umm al-Qura)",
    day: "Day",
    month: "Month",
    year: "Year",
    calc: "Calculate",
    details_badge: "ğŸ¯ Your Age Details",
    birthday_today: "It's your birthday today! Happy Birthday ğŸ‰",
    metrics_title: "Your Age in Many Ways",
    years: "Years",
    months: "Months",
    weeks: "Weeks",
    days: "Days",
    hours: "Hours",
    more_info: "More about your age",
    born_day: "Born on: ",
    born_season: "Season: ",
    life_stage: "Life stage: ",
    sleep: "Healthy sleep: 7â€“9 hours/day",
    greg_age: "Age (Gregorian)",
    hijri_age: "Age (Hijri â€“ Umm al-Qura)",
    facts: "Facts from your life",
    breaths: "Breaths taken",
    heartbeats: "Heartbeats",
    laughs: "Times you laughed",
    slept: "Time spent sleeping",
    eaten: "Time spent eating",
    clarify: "Approximate averages: 20k breaths/day, 80 bpm, 10 laughs/day, 8 h sleep/day, 80 min eating/day.",
    no_birth: "No birthdate entered yet.",
    go_input: "Go to input page",
    share_image: "Share as Image"
  }
};
function getLang(){ return localStorage.getItem('ageLang') || 'ar'; }
function setLang(l){ localStorage.setItem('ageLang', l); applyI18n(); markLang(l); }
function markLang(l){
  document.querySelectorAll('.lang-chip').forEach(e=> e.classList.toggle('selected', e.getAttribute('data-lang')===l));
}
function applyI18n(){
  const l = getLang(); const dict = I18N[l];
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k = el.getAttribute('data-i18n');
    if(dict[k]) el.innerHTML = dict[k];
  });
  // Button label
  const sbtn = document.getElementById('openCustomize'); if(sbtn) sbtn.textContent = dict.settings;
  // Dir switching
  document.documentElement.setAttribute('lang', l);
  document.documentElement.setAttribute('dir', l==='ar'?'rtl':'ltr');
}

/* Theme/Accent/Prefs */
function markSelectedTheme(t){
  document.querySelectorAll('.theme-btn').forEach(b=>{
    if(b.getAttribute('data-theme')===t) b.classList.add('selected');
    else b.classList.remove('selected');
  });
}
function markSelectedAccent(c){
  document.querySelectorAll('.color-dot').forEach(d=>{
    if(d.getAttribute('data-accent')===c) d.classList.add('selected');
    else d.classList.remove('selected');
  });
}
function setTheme(t){
  if(!t) t='dark';
  const root = document.documentElement;
  if(t==='light') root.setAttribute('data-theme','light');
  else if(t==='amoled') root.setAttribute('data-theme','amoled');
  else { root.setAttribute('data-theme','dark'); t='dark'; }
  localStorage.setItem('ageTheme', t);
  markSelectedTheme(t);
}
function setAccent(c){
  document.documentElement.style.setProperty('--accent', c);
  document.documentElement.style.setProperty('--accent-2', c);
  localStorage.setItem('ageAccent', c);
  markSelectedAccent(c);
}
function loadPrefs(){
  const t = localStorage.getItem('ageTheme') || 'dark';
  const c = localStorage.getItem('ageAccent') || '#6d62ff';
  const l = getLang();
  setAccent(c); setTheme(t); markLang(l); applyI18n();
  const tz = localStorage.getItem('ageTZ') || 'Asia/Riyadh';
  const tzSel = document.getElementById('tzSelect'); if(tzSel){ tzSel.value = tz; }
}
function setupSettings(){
  const btn = document.getElementById('openCustomize');
  const p = document.getElementById('customizePanel');
  if(btn && p){ btn.onclick = ()=>{ p.style.display = (p.style.display === 'block') ? 'none' : 'block'; window.scrollTo({top:0, behavior:'smooth'}); }; }
  document.querySelectorAll('.theme-btn').forEach(b=> b.addEventListener('click', ()=> setTheme(b.getAttribute('data-theme')) ));
  document.querySelectorAll('.color-dot').forEach(d=> d.addEventListener('click', ()=> setAccent(d.getAttribute('data-accent')) ));
  document.querySelectorAll('.lang-chip').forEach(d=> d.addEventListener('click', ()=> setLang(d.getAttribute('data-lang')) ));
  const tzSel = document.getElementById('tzSelect');
  if(tzSel){ tzSel.addEventListener('change', ()=>{ localStorage.setItem('ageTZ', tzSel.value); location.reload(); }); }
  loadPrefs();
}

/* Timezone helpers */
function nowInTZ(tz){
  const f = new Intl.DateTimeFormat('en-US',{timeZone:tz, year:'numeric', month:'numeric', day:'numeric', hour:'numeric', minute:'numeric', second:'numeric', hour12:false});
  const parts = f.formatToParts(new Date());
  const get = t => +parts.find(p=>p.type===t).value;
  // Return a Date in UTC representing the same instant in that timezone
  return new Date(Date.UTC(get('year'), get('month')-1, get('day'), get('hour'), get('minute'), get('second')));
}

/* Hijri (Umm al-Qura) */
function gregToUmmAlQura(date){
  const parts = new Intl.DateTimeFormat('en-u-ca-islamic-umalqura', {year:'numeric',month:'numeric',day:'numeric'}).formatToParts(date);
  return {
    year: +parts.find(p=>p.type==='year').value,
    month:+parts.find(p=>p.type==='month').value,
    day:  +parts.find(p=>p.type==='day').value
  };
}
const ISLAMIC_EPOCH = 1948439.5;
function islamicToJDN(y,m,d){
  return d + Math.ceil(29.5*(m-1)) + (y-1)*354 + Math.floor((3 + 11*y)/30) + ISLAMIC_EPOCH - 1;
}
function jdnToGreg(jd){
  const Z = Math.floor(jd + 0.5);
  let A = Z;
  const alpha = Math.floor((A - 1867216.25)/36524.25);
  A = A + 1 + alpha - Math.floor(alpha/4);
  const B = A + 1524;
  const C = Math.floor((B - 122.1)/365.25);
  const D = Math.floor(365.25*C);
  const E = Math.floor((B - D)/30.6001);
  const day = B - D - Math.floor(30.6001*E);
  const month = (E < 14) ? E - 1 : E - 13;
  const year = (month > 2) ? C - 4716 : C - 4715;
  return {year, month, day};
}
function ummAlQuraToGreg(y,m,d){
  const g0 = jdnToGreg(islamicToJDN(y,m,d));
  const base = new Date(Date.UTC(g0.year, g0.month-1, g0.day));
  const dayMs = 24*60*60*1000;
  const tryFind = (span)=>{
    for(let off=-span; off<=span; off++){
      const t = new Date(base.getTime()+ off*dayMs);
      const h = gregToUmmAlQura(t);
      if(h.year===y && h.month===m && h.day===d){
        return {year:t.getUTCFullYear(), month:t.getUTCMonth()+1, day:t.getUTCDate()};
      }
    }
    return null;
  };
  return tryFind(6) || tryFind(20) || {year:g0.year, month:g0.month, day:g0.day};
}
function ummMonthLength(y,m){
  const start = ummAlQuraToGreg(y,m,1);
  let ny = y, nm = m+1; if(nm>12){ nm=1; ny++; }
  const next = ummAlQuraToGreg(ny,nm,1);
  const d1 = Date.UTC(start.year, start.month-1, start.day);
  const d2 = Date.UTC(next.year, next.month-1, next.day);
  return Math.round((d2-d1)/(24*60*60*1000));
}


document.getElementById('calcBtn').onclick = ()=>{ 
  const d = +$('day').value, m = +$('month').value, y = +$('year').value;
  if(!d||!m||!y){alert(getLang()==='ar'?'Ù…Ù† ÙØ¶Ù„Ùƒ Ø£ÙƒÙ…Ù„ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„Ø³Ù†Ø©':'Please fill day, month and year'); return;}
  const type = $('calType').value;
  let gY,gM,gD;
  if(type==='greg'){ gY=y; gM=m; gD=d; }
  else {
    const g = ummAlQuraToGreg(y,m,d); // precise
    gY=g.year; gM=g.month; gD=g.day;
  }
  localStorage.setItem('birthInfo', JSON.stringify({type, input:{d,m,y}, greg:{gY,gM,gD}}));
  window.location.href = 'age-details.html';
};

['day','month','year'].forEach(id=> $(id).addEventListener('keydown', e=>{ if(e.key==='Enter') $('calcBtn').click(); }));

document.getElementById('yearNow').textContent = new Date().getFullYear();
setupSettings();
applyI18n();
</script>
</body>
</html>
